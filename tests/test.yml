---
- hosts: all

  vars:
    php_versions:
    #- 5.6
    #- 7.1
    - 7.0
    #- 7.2

  tasks:

  - name: Add PPA for latest php
    apt_repository:
      repo: ppa:ondrej/php
    when: ansible_distribution == "Ubuntu"

  - name: install git
    apt:
      name: git

  - name: Install PHP development files
    apt:
      name: php{{ item }}-dev
    with_items: '{{ php_versions }}'

  - include_role:
      name: role_under_test
    with_items: '{{ php_versions }}'
    loop_control:
      loop_var: jsmin_php_version